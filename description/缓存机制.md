### 缓存机制
通过在一段时间内保留已接收的 web 资源的一个副本，如果在资源的有效时间内再次发送请求，那么浏览器会直接使用缓存的副本，而不是向服务器发送请求。使用缓存可以有效提高页面的打开速度，减少不必要的网络带宽。
### 设置
web 资源的缓存策略一般由服务器来指定，分别为强缓存和协商缓存
### 强缓存
使用强缓存，如果资源有效，直接使用缓存资源，不必向服务器发送请求。强缓存可通过两种方式设置，分别是 HTTP 请求头中的 Expire 属性和 Cache-Control 属性
- Expire 是 HTTP 1.0 中的方式，因为它的一些缺点，在 HTTP 1.1 提出了一个新的请求头属性就是 Cache-Control 属性，它提供了对资源的缓存的更精确的控制。它有不同的值，
- max-age 来指定缓存时间的长短，这个一个相对的时间，它根据第一次请求的时间来计算出资源的过期时间
- private 用来规定只能给客户端缓存，不能被代理服务器缓存
- no-store 用来指定资源不能被缓存
- no-cache 资源能被缓存，但立即失效，每次都需要向服务器发送请求
### 协商缓存
使用协商缓存策略，会先向服务器发送一个请求，如果资源没有修改，返回 304 状态，让浏览器使用本地缓存资源，使用资源发生修改，则返回修改的资源
- 服务器在响应头中添加 Last-Modified 属性来指定资源最后一次修改时间，当浏览器下次发生请求，会在请求头中添加一个 If-Modified-Since 的属性，是上一次资源的返回的 Last-Modified 的值，通过比较判断资源是否修改。使用这种方法有一个缺点，就是 Last-Modified 只能精确到秒级。
- 因为 Last-Modified 的缺点，HTTP 提供另一种方式，Etag 属性 资源生成的唯一标识符，当资源发生修改，也会随之改变，服务器在返回资源时，会在头信息添加 Etag 属性。在下次发送请求，浏览器会在请求头添加一个 If-None-Match 属性，这个属性就是上一次返回的 Etag 的值
- 当 Last-Modified 和 Etag 属性同时出现，Etag 优先级高，使用协商缓存时，如果考虑服务器的负载均衡的问题
### 总结
强缓存策略和协商缓存策略在缓存命中时都会直接使用本地的缓存副本，区别只在于协商缓存会向服务器发送一次请求。它们缓存不命中时，都会向服务器发送请求来获取资源。在实际的缓存机制中，强缓存策略和协商缓存策略是一起合作使用的。浏览器首先会根据请求的信息判断，强缓存是否命中，如果命中则直接使用资源。如果不命中则根据头信息向服务器发起请求，使用协商缓存，如果协商缓存命中的话，则服务器不返回资源，浏览器直接使用本地资源的副本，如果协商缓存不命中，则浏览器返回最新的资源给浏览器。





Expire Cache-Control
Last-Modified ETag